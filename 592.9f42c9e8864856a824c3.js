(self.webpackChunksimple_obs_stt=self.webpackChunksimple_obs_stt||[]).push([[592],{625:(t,e,n)=>{"use strict";n.d(e,{E:()=>h,B:()=>b});var a=n(1116),i=n(3235),o=n(9713),r=n(2629),l=n(2926),s=n(1494),c=n(3917);const x=["avatarElement"],p=["boxElement"],y=["textElement"];function m(t,e){1&t&&l._UZ(0,"div",13),2&t&&l.Q6J("innerHTML",e.$implicit,l.oJD)}const u=function(t,e){return{value:t,params:e}};function v(t,e){if(1&t&&(l.TgZ(0,"div",11),l.YNc(1,m,1,1,"div",12),l.qZA()),2&t){const t=e.$implicit,n=l.oxw().$implicit,a=l.oxw(2).ngIf,i=l.oxw();l.ekj("opacity-70",!n.finalized),l.Q6J("@listAnimation",l.WLB(5,u,t.length,i.GetRandomizedParams(a))),l.xp6(1),l.Q6J("ngForOf",t)("ngForTrackBy",i.trackLetter)}}function d(t,e){if(1&t&&(l.ynx(0),l.YNc(1,v,2,8,"div",10),l.BQk()),2&t){const t=e.$implicit,n=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",t.valueNext)("ngForTrackBy",n.trackWord)}}function f(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"div",1),l._UZ(2,"div",2,3),l.TgZ(4,"div",4,5),l.TgZ(6,"div",6,7),l.YNc(8,d,2,2,"ng-container",8),l._UZ(9,"div",9),l.qZA(),l.qZA(),l.qZA(),l.BQk()),2&t){const t=e.ngIf,n=l.oxw().ngIf,a=l.oxw();l.xp6(2),l.ekj("hidden",!n.avatarStyle.backgroundImage.value[0]),l.xp6(4),l.ekj("host",2===t.connectionState),l.xp6(2),l.Q6J("ngForOf",t.sentences)("ngForTrackBy",a.track),l.xp6(1),l.Q6J("innerHTML"," ",l.oJD)}}function g(t,e){if(1&t&&(l.ynx(0),l.YNc(1,f,10,7,"ng-container",0),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",l.lcZ(2,1,t.speechQuery.state$))}}let h=(()=>{class t{constructor(t,e,n){this.speechQuery=t,this.styleQuery=e,this.detector=n,this.track=(t,e)=>t,this.trackWord=(t,e)=>t,this.trackLetter=(t,e)=>e,this.GetRandomRange=(t,e)=>Math.random()*(e-t)+t}GetRandomizedParams(t){const e=t.textStyle.scaleMin.value[0],n=t.textStyle.scaleMax.value[0],a=t.textStyle.rotationMin.value[0],i=t.textStyle.rotationMax.value[0],o=t.textStyle.translationXMin.value[0],r=t.textStyle.translationXMax.value[0],l=t.textStyle.translationYMin.value[0],s=t.textStyle.translationYMax.value[0];return{time:this.GetRandomRange(t.textStyle.durationMin.value[0],t.textStyle.durationMax.value[0]).toFixed(1),scale:this.GetRandomRange(e,n).toFixed(1),rotation:this.GetRandomRange(a,i).toFixed(1),translateX:this.GetRandomRange(o,r).toFixed(1),translateY:this.GetRandomRange(l,s).toFixed(1)}}ApplyElementStyleDAta(t,e,n,a,o){var r;for(const l in a){const s=null===(r=i.nS[e])||void 0===r?void 0:r[l];a[l].type!==i.RS.logic?s?s(t,n.style,(0,i.$4)(a[l],o),o):n.style[l]=(0,i.$4)(a[l],o):s&&s(t,n.style,(0,i.$4)(a[l],o),o)}}ApplyStyles(t,e){this.ApplyElementStyleDAta(t,"avatarStyle",this.avatarElement.nativeElement,t.avatarStyle,e),this.ApplyElementStyleDAta(t,"boxStyle",this.boxElement.nativeElement,t.boxStyle,e),this.ApplyElementStyleDAta(t,"textStyle",this.textElement.nativeElement,t.textStyle,e)}ngAfterViewInit(){(0,r.WZ)([this.styleQuery.current$,this.speechQuery.showBubble$]).subscribe(([t,e])=>{this.ApplyStyles(t,e?0:1)})}ngOnInit(){this.speechQuery.sentences$.subscribe(t=>{this.detector.detectChanges(),setTimeout(()=>{var t,e,n,a;return null===(n=null===(e=null===(t=this.textElement)||void 0===t?void 0:t.nativeElement)||void 0===e?void 0:e.scrollTo)||void 0===n?void 0:n.call(e,{top:null===(a=this.textElement.nativeElement)||void 0===a?void 0:a.scrollHeight,behavior:"smooth"})},50)})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.v),l.Y36(c.B),l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-stt-renderer"]],viewQuery:function(t,e){if(1&t&&(l.Gf(x,5),l.Gf(p,5),l.Gf(y,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.avatarElement=t.first),l.iGM(t=l.CRH())&&(e.boxElement=t.first),l.iGM(t=l.CRH())&&(e.textElement=t.first)}},decls:2,vars:3,consts:[[4,"ngIf"],[1,"flex","stt-container","flex","items-end","relative"],[1,"stt-box-avatar","pointer-events-none","z-50","w-36","h-36","bg-contain","bg-center","bg-no-repeat",2,"animation-iteration-count","infinite","animation-timing-function","ease-in-out"],["avatarElement",""],[1,"stt-box-container","relative","stt-box","flex","flex-col","bg-cover","bg-center"],["boxElement",""],[1,"stt-box-text","inset-0","flex","flex-wrap","break-words","min-h-8","overflow-y-scroll","overflow-x-hidden"],["textElement",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"whitespace-pre-wrap",3,"innerHTML"],["class","flex whitespace-pre-wrap",3,"opacity-70",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","whitespace-pre-wrap"],[3,"innerHTML",4,"ngFor","ngForOf","ngForTrackBy"],[3,"innerHTML"]],template:function(t,e){1&t&&(l.YNc(0,g,3,3,"ng-container",0),l.ALo(1,"async")),2&t&&l.Q6J("ngIf",l.lcZ(1,1,e.styleQuery.current$))},directives:[a.O5,a.sg],pipes:[a.Ov],encapsulation:2,data:{animation:[(0,o.X$)("listAnimation",[(0,o.eR)("* => *",[(0,o.IO)(":enter",[(0,o.oB)({opacity:0,transform:"rotate({{rotation}}deg) scale({{scale}}) translateX({{translateX}}px) translateY({{translateY}}px)"}),(0,o.EY)(30,[(0,o.jt)("{{time}}s",(0,o.oB)({opacity:1,transform:"rotate(0) scale(1) translateX(0) translateY(0)"}))])],{optional:!0})])])]},changeDetection:0}),t})(),b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.ez]]}),t})()}}]);