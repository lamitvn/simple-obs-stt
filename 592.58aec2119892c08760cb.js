(self.webpackChunksimple_obs_stt=self.webpackChunksimple_obs_stt||[]).push([[592],{1944:(t,e,n)=>{"use strict";n.d(e,{E:()=>w,B:()=>A});var a=n(1116),i=n(3235),r=n(9713),o=n(2629),l=n(2926),s=n(9624);let c=(()=>{class t{constructor(t){this.sanitized=t}transform(t){return t?this.sanitized.bypassSecurityTrustHtml(t):""}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(s.H7,16))},t.\u0275pipe=l.Yjl({name:"sanitizeHtml",type:t,pure:!0}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.ez]]}),t})();var m=n(4818),u=n(3917);const y=["avatarElement"],x=["boxElement"],f=["textElement"],v=function(t,e){return{value:t,params:e}};function d(t,e){if(1&t&&(l._UZ(0,"div",13),l.ALo(1,"sanitizeHtml")),2&t){const t=e.$implicit,n=l.oxw(4).ngIf,a=l.oxw();l.Q6J("@listAnimation",l.WLB(4,v,t,a.GetRandomizedParams(n)))("innerHTML",l.lcZ(1,2,t),l.oJD)}}function g(t,e){if(1&t&&(l.TgZ(0,"div",11),l.YNc(1,d,2,7,"div",12),l.qZA()),2&t){const t=e.$implicit,n=l.oxw().$implicit,a=l.oxw(3);l.ekj("opacity-70",!n.finalized),l.xp6(1),l.Q6J("ngForOf",t)("ngForTrackBy",a.trackLetter)}}function h(t,e){if(1&t&&(l.ynx(0),l.YNc(1,g,2,4,"div",10),l.ALo(2,"async"),l.BQk()),2&t){const t=e.$implicit,n=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",l.lcZ(2,2,t.AnimatedValue))("ngForTrackBy",n.trackWord)}}function S(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"div",1),l._UZ(2,"div",2,3),l.TgZ(4,"div",4,5),l.TgZ(6,"div",6,7),l.YNc(8,h,3,4,"ng-container",8),l.ALo(9,"async"),l._UZ(10,"div",9),l.qZA(),l.qZA(),l.qZA(),l.BQk()),2&t){const t=e.ngIf,n=l.oxw().ngIf,a=l.oxw();l.xp6(2),l.ekj("hidden",!n.avatarStyle.backgroundImage.value[0]),l.xp6(4),l.ekj("host",2===t.connectionState),l.xp6(2),l.Q6J("ngForOf",l.lcZ(9,7,a.speechQuery.list$))("ngForTrackBy",a.track),l.xp6(2),l.Q6J("innerHTML"," ",l.oJD)}}function b(t,e){if(1&t&&(l.ynx(0),l.YNc(1,S,11,9,"ng-container",0),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw();l.xp6(1),l.Q6J("ngIf",l.lcZ(2,1,t.speechQuery.state$))}}let w=(()=>{class t{constructor(t,e){this.speechQuery=t,this.styleQuery=e,this.track=(t,e)=>e.id,this.trackWord=(t,e)=>t,this.trackLetter=(t,e)=>e,this.GetRandomRange=(t,e)=>Math.random()*(e-t)+t}GetRandomizedParams(t){const e=t.textStyle.scaleMin.value[0],n=t.textStyle.scaleMax.value[0],a=t.textStyle.rotationMin.value[0],i=t.textStyle.rotationMax.value[0],r=t.textStyle.translationXMin.value[0],o=t.textStyle.translationXMax.value[0],l=t.textStyle.translationYMin.value[0],s=t.textStyle.translationYMax.value[0];return{time:this.GetRandomRange(t.textStyle.durationMin.value[0],t.textStyle.durationMax.value[0]).toFixed(1),scale:this.GetRandomRange(e,n).toFixed(1),rotation:this.GetRandomRange(a,i).toFixed(1),translateX:this.GetRandomRange(r,o).toFixed(1),translateY:this.GetRandomRange(l,s).toFixed(1)}}ApplyElementStyleDAta(t,e,n,a,r){var o;for(const l in a){const s=null===(o=i.nS[e])||void 0===o?void 0:o[l];a[l].type!==i.RS.logic?s?s(t,n.style,(0,i.$4)(a[l],r),r):n.style[l]=(0,i.$4)(a[l],r):s&&s(t,n.style,(0,i.$4)(a[l],r),r)}}ApplyStyles(t,e){this.ApplyElementStyleDAta(t,"avatarStyle",this.avatarElement.nativeElement,t.avatarStyle,e),this.ApplyElementStyleDAta(t,"boxStyle",this.boxElement.nativeElement,t.boxStyle,e),this.ApplyElementStyleDAta(t,"textStyle",this.textElement.nativeElement,t.textStyle,e)}ngAfterViewInit(){(0,o.WZ)([this.styleQuery.current$,this.speechQuery.showBubble$]).subscribe(([t,e])=>{this.ApplyStyles(t,e?0:1)})}AnimateScroll(){var t,e,n,a;null===(n=null===(e=null===(t=this.textElement)||void 0===t?void 0:t.nativeElement)||void 0===e?void 0:e.scrollTo)||void 0===n||n.call(e,{top:null===(a=this.textElement.nativeElement)||void 0===a?void 0:a.scrollHeight})}ngOnInit(){this.speechQuery.onTypingEvent$.subscribe(()=>this.AnimateScroll())}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(m.v),l.Y36(u.B))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-stt-renderer"]],viewQuery:function(t,e){if(1&t&&(l.Gf(y,5),l.Gf(x,5),l.Gf(f,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.avatarElement=t.first),l.iGM(t=l.CRH())&&(e.boxElement=t.first),l.iGM(t=l.CRH())&&(e.textElement=t.first)}},decls:2,vars:3,consts:[[4,"ngIf"],[1,"flex","stt-container","flex","items-end","relative"],[1,"stt-box-avatar","pointer-events-none","z-50","w-36","h-36","bg-contain","bg-center","bg-no-repeat",2,"animation-iteration-count","infinite","animation-timing-function","ease-in-out"],["avatarElement",""],[1,"stt-box-container","relative","stt-box","flex","flex-col","bg-cover","bg-center"],["boxElement",""],[1,"stt-box-text","inset-0","flex","flex-wrap","break-words","min-h-8","overflow-y-scroll","overflow-x-hidden"],["textElement",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"whitespace-pre-wrap",3,"innerHTML"],["class","flex items-center whitespace-pre-wrap",3,"opacity-70",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","whitespace-pre-wrap"],[3,"innerHTML",4,"ngFor","ngForOf","ngForTrackBy"],[3,"innerHTML"]],template:function(t,e){1&t&&(l.YNc(0,b,3,3,"ng-container",0),l.ALo(1,"async")),2&t&&l.Q6J("ngIf",l.lcZ(1,1,e.styleQuery.current$))},directives:[a.O5,a.sg],pipes:[a.Ov,c],encapsulation:2,data:{animation:[(0,r.X$)("listAnimation",[(0,r.eR)(":enter",[(0,r.oB)({opacity:0,transform:"rotate({{rotation}}deg) scale({{scale}}) translateX({{translateX}}px) translateY({{translateY}}px)"}),(0,r.jt)("{{time}}s",(0,r.oB)({opacity:1,transform:"rotate(0) scale(1) translateX(0) translateY(0)"}))])]),(0,r.X$)("opacity",[])]},changeDetection:0}),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.ez,p]]}),t})()}}]);