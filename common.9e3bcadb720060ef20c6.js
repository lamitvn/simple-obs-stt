(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{TG6D:function(t,e,n){"use strict";n.d(e,"a",function(){return f}),n.d(e,"b",function(){return x});var a=n("ofXK"),i=n("zHT3"),l=n("R0Ic"),r=n("fXoL"),o=n("cLXs"),s=n("hBBj");const c=["avatarElement"],u=["boxElement"],b=["textElement"];function y(t,e){if(1&t&&(r.Pb(0,"div"),r.xc(1),r.Ob()),2&t){const t=e.$implicit;r.yb(1),r.yc(t)}}const d=function(t,e){return{value:t,params:e}};function m(t,e){if(1&t&&(r.Pb(0,"div",10),r.vc(1,y,2,1,"div",8),r.Ob()),2&t){const t=e.$implicit,n=r.bc().$implicit,a=r.bc(2).ngIf,i=r.bc();r.Bb("opacity-70",!n.finalized),r.hc("@listAnimation",r.jc(5,d,t.length,i.GetRandomizedParams(a))),r.yb(1),r.hc("ngForOf",t)("ngForTrackBy",i.trackLetter)}}function p(t,e){if(1&t&&(r.Nb(0),r.vc(1,m,2,8,"div",9),r.Mb()),2&t){const t=e.$implicit,n=r.bc(3);r.yb(1),r.hc("ngForOf",t.valueNext)("ngForTrackBy",n.trackWord)}}function v(t,e){if(1&t&&(r.Nb(0),r.Pb(1,"div",1),r.cc(2,"async"),r.Kb(3,"div",2,3),r.Pb(5,"div",4,5),r.Pb(7,"div",6,7),r.vc(9,p,2,2,"ng-container",8),r.Ob(),r.Ob(),r.Ob(),r.Mb()),2&t){const t=e.ngIf,n=r.bc().ngIf,a=r.bc();r.yb(1),r.Bb("show",r.dc(2,8,a.speechQuery.showBubble$)),r.yb(2),r.Bb("hidden",!n.avatarStyle.backgroundImage.value),r.yb(4),r.Bb("host",2===t.speechServiceState),r.yb(2),r.hc("ngForOf",t.sentences)("ngForTrackBy",a.track)}}function h(t,e){if(1&t&&(r.Nb(0),r.vc(1,v,10,10,"ng-container",0),r.cc(2,"async"),r.Mb()),2&t){const t=r.bc();r.yb(1),r.hc("ngIf",r.dc(2,1,t.speechQuery.state$))}}let f=(()=>{class t{constructor(t,e,n){this.speechQuery=t,this.styleQuery=e,this.detector=n,this.track=(t,e)=>t,this.trackWord=(t,e)=>t,this.trackLetter=(t,e)=>e}BuildTypedValue(t){switch(t.type){case i.d.pixels:return t.value+"px";case i.d.ms:return t.value+"ms";case i.d.url:return`url(${t.value})`;case i.d.translateX:return`translateX(${t.value}px)`;case i.d.translateY:return`translateY(${t.value}px)`;case i.d.number:default:return t.value}}GetRandomRange(t,e){return Math.random()*(e-t)+t}GetRandomizedParams(t){const e=t.textStyle.scaleMin.value,n=t.textStyle.scaleMax.value,a=t.textStyle.rotationMin.value,i=t.textStyle.rotationMax.value,l=t.textStyle.translationXMin.value,r=t.textStyle.translationXMax.value,o=t.textStyle.translationYMin.value,s=t.textStyle.translationYMax.value;return{time:this.GetRandomRange(t.textStyle.durationMin.value,t.textStyle.durationMax.value).toFixed(1),scale:this.GetRandomRange(e,n).toFixed(1),rotation:this.GetRandomRange(a,i).toFixed(1),translateX:this.GetRandomRange(l,r).toFixed(1),translateY:this.GetRandomRange(o,s).toFixed(1)}}ApplyElementStyleDAta(t,e,n,a){var l;for(const r in a){if(a[r].type===i.d.logic)continue;const o=null===(l=i.a[e])||void 0===l?void 0:l[r];o?o(t,n.style,this.BuildTypedValue(a[r])):n.style[r]=this.BuildTypedValue(a[r])}}ApplyCompositeElementStyleData(t,e){for(const n in e)t.style[n]=Object.values(e[n]).map(t=>this.BuildTypedValue(t)).join(" ")}ApplyStyles(t){this.ApplyElementStyleDAta(t,"avatarStyle",this.avatarElement.nativeElement,t.avatarStyle),this.ApplyElementStyleDAta(t,"boxStyle",this.boxElement.nativeElement,t.boxStyle),this.ApplyElementStyleDAta(t,"textStyle",this.textElement.nativeElement,t.textStyle),this.ApplyCompositeElementStyleData(this.textElement.nativeElement,t.textStyleComposite),this.ApplyCompositeElementStyleData(this.avatarElement.nativeElement,t.avatarStyleComposite)}ngAfterViewInit(){this.styleQuery.current$.subscribe(t=>this.ApplyStyles(t))}ngOnInit(){this.speechQuery.sentences$.subscribe(t=>{this.detector.detectChanges(),setTimeout(()=>{var t,e,n,a;return null===(n=null===(e=null===(t=this.textElement)||void 0===t?void 0:t.nativeElement)||void 0===e?void 0:e.scrollTo)||void 0===n?void 0:n.call(e,{top:null===(a=this.textElement.nativeElement)||void 0===a?void 0:a.scrollHeight,behavior:"smooth"})},50)})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(o.a),r.Jb(s.a),r.Jb(r.h))},t.\u0275cmp=r.Db({type:t,selectors:[["app-stt-renderer"]],viewQuery:function(t,e){if(1&t&&(r.Ac(c,1),r.Ac(u,1),r.Ac(b,1)),2&t){let t;r.mc(t=r.Yb())&&(e.avatarElement=t.first),r.mc(t=r.Yb())&&(e.boxElement=t.first),r.mc(t=r.Yb())&&(e.textElement=t.first)}},decls:2,vars:3,consts:[[4,"ngIf"],[1,"flex","stt-container","flex","items-end","relative"],[1,"pointer-events-none","z-50","w-36","h-36","bg-contain","bg-center","bg-no-repeat",2,"animation-iteration-count","infinite","animation-timing-function","ease-in-out"],["avatarElement",""],[1,"box-content","relative","stt-box","flex","flex-col","bg-cover","bg-center"],["boxElement",""],[1,"flex","flex-wrap","items-start","break-words","min-h-8","stt-box-text","absolute","overflow-y-scroll","overflow-x-hidden"],["textElement",""],[4,"ngFor","ngForOf","ngForTrackBy"],["class","flex word whitespace-pre-wrap",3,"opacity-70",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","word","whitespace-pre-wrap"]],template:function(t,e){1&t&&(r.vc(0,h,3,3,"ng-container",0),r.cc(1,"async")),2&t&&r.hc("ngIf",r.dc(1,1,e.styleQuery.current$))},directives:[a.m,a.l],pipes:[a.b],encapsulation:2,data:{animation:[Object(l.j)("listAnimation",[Object(l.i)("* => *",[Object(l.f)(":enter",[Object(l.h)({opacity:0,transform:"rotate({{rotation}}deg) scale({{scale}}) translateX({{translateX}}px) translateY({{translateY}}px)"}),Object(l.e)("{{time}}s",Object(l.h)({opacity:1,transform:"rotate(0) scale(1) translateX(0) translateY(0)"}))],{optional:!0})])])]},changeDetection:0}),t})(),x=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({imports:[[a.c]]}),t})()}}]);